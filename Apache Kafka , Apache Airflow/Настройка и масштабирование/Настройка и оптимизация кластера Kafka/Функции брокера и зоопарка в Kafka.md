## Функции брокера и ZooKeeper в Apache Kafka

### **Брокер (Broker)**
Брокер в Apache Kafka — это сервер, который отвечает за хранение и обработку сообщений. Основные функции брокера включают:

- **Хранение сообщений**: Брокеры сохраняют сообщения, которые были отправлены продюсерами в топики. Каждое сообщение сохраняется в определенной партиции, что позволяет организовать данные и обеспечить их доступность[1].

- **Обработка запросов**: Брокеры принимают запросы на запись и чтение данных от продюсеров и потребителей. Они управляют потоками данных, обеспечивая их надежную доставку и сохранение порядка сообщений внутри партиций[2].

- **Репликация данных**: Для обеспечения отказоустойчивости брокеры используют механизм репликации, который создает резервные копии партиций на других брокерах. Это позволяет избежать потери данных в случае сбоя одного из узлов[2].

- **Управление метаданными**: Брокеры хранят информацию о топиках, партициях и их распределении по кластеру. Это помогает продюсерам и потребителям правильно взаимодействовать с системой[1].

- **Координация с контроллером**: Один из брокеров выполняет роль контроллера, который следит за состоянием кластера и управляет распределением партиций и реплик между брокерами[1][2].

### **ZooKeeper**
ZooKeeper — это отдельный компонент, который используется для управления конфигурацией и координации между брокерами в кластере Kafka. Его основные функции включают:

- **Управление конфигурацией**: ZooKeeper хранит конфигурационные данные о кластере Kafka, включая информацию о брокерах, топиках и их настройках. Это позволяет централизованно управлять параметрами системы[1][2].

- **Координация процессов**: ZooKeeper обеспечивает согласованность состояния между брокерами, что критично для работы распределенной системы. Он помогает выбрать контроллера кластера и следит за состоянием узлов[2].

- **Мониторинг состояния**: ZooKeeper отслеживает состояние брокеров и уведомляет о любых изменениях, таких как выход узла из строя или его восстановление. Это позволяет системе быстро реагировать на сбои и поддерживать высокую доступность[1][2].

Таким образом, брокеры и ZooKeeper играют ключевую роль в обеспечении надежности, производительности и масштабируемости Apache Kafka как платформы для обработки потоковых данных.

Citations:
[1] https://dzen.ru/a/ZMJRLt5EpgbeE5mL
[2] https://habr.com/ru/companies/kuper/articles/738634/
[3] https://kafka-school.ru/blog/kafka-standalone-consumer/
[4] https://babok-school.ru/blog/kafka-as-integration-tool-overview-for-analyst/
[5] https://blog.skillfactory.ru/glossary/kafka-apache/
[6] https://practicum.yandex.ru/blog/broker-soobsheniy-apache-kafka/
[7] https://kafka-school.ru/blog/kafka-consumer/
[8] https://habr.com/ru/articles/466585/