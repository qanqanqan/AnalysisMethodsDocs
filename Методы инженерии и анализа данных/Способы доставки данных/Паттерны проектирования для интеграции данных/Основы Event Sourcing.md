
[Habr. Event Sourcing](https://habr.com/ru/companies/otus/articles/518282/)  
[Dzen. Event Sourcing vs Event Driven](https://dzen.ru/a/ZnplFqt9R3T5UKSc)  
[Youtube. Event Sourcing за 14 минут](https://www.youtube.com/watch?v=fYkBqXQKvtw&embeds_referring_euri=https%3A%2F%2F)  

**Event Sourcing** — это архитектурный шаблон, который фокусируется на сохранении всех изменений состояния приложения в виде последовательности событий. Вместо того чтобы хранить текущее состояние сущностей, система сохраняет каждое событие, которое изменяет это состояние, обеспечивая полную историю изменений и возможность восстановления состояния на любой момент времени. 

Этот подход особенно полезен в системах, требующих высокой степени надежности и аудита данных, таких как финансовые приложения или системы управления бизнес-процессами.

---

## 1. **Принцип работы**

В рамках Event Sourcing каждое изменение состояния бизнес-объекта (например, банковского счета) фиксируется как отдельное событие. Например, события могут включать:

- `Deposit { amount: 100 }` — внесение 100 единиц.
- `Withdraw { amount: 50 }` — снятие 50 единиц.

Эти события хранятся в специальном хранилище событий (Event Store), которое служит источником истины для системы. Чтобы восстановить текущее состояние объекта, система считывает все события, связанные с этим объектом, и применяет их в порядке их возникновения.

---

## 2. **Преимущества Event Sourcing**

- **Историчность данных**: Сохранение всех событий позволяет вести полный аудит изменений и восстанавливать состояние на любой момент времени.
- **Отказоустойчивость**: Если необходимо изменить бизнес-логику или исправить ошибку, можно просто пересоздать модели чтения (read models) на основе уже сохраненных событий.
- **Поддержка временных запросов**: Возможность получения состояния объекта на любую дату и время, что полезно для анализа и отчетности.

---

## 3. **Сравнение с традиционными подходами**

В традиционных системах (CRUD) текущее состояние сущности хранится в базе данных, и при каждом изменении это состояние перезаписывается. В отличие от этого, Event Sourcing сохраняет каждое изменение как отдельное событие, что позволяет избежать потери истории и обеспечивает большую гибкость в управлении данными.

---

## 4. **Интеграция с другими паттернами**

Event Sourcing часто используется в сочетании с паттерном **CQRS (Command Query Responsibility Segregation)**. В этой архитектуре команды (commands) отвечают за изменения состояния системы, а запросы (queries) — за чтение данных. Это разделение позволяет оптимизировать производительность и упростить управление данными.

---
