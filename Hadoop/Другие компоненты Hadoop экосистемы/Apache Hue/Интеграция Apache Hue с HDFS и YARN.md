# Интеграция Apache Hue с HDFS и YARN

Интеграция Apache Hue с HDFS и YARN является ключевым аспектом использования Hue в экосистеме Hadoop и позволяет использовать Hue как удобный веб-интерфейс для управления и анализа данных, а также взаимодействия с различными компонентами Hadoop, включая HDFS и YARN.

## Основные шаги и функции интеграции Hue


### 1.  **Предварительные условия**

Убедитесь, что у вас установлены и запущены:

-   Apache Hadoop (включая HDFS и YARN).
-   Apache Hue.

### 2.  **Настройка конфигурации Hue**

Откройте файл конфигурации  `hue.ini`, который, как правило, находится в директории  `/etc/hue/`  или в вашем каталоге установки Hue. Внесите следующие изменения:

#### a. Конфигурация HDFS

- **Файловый браузер**: Hue предоставляет FileBrowser, который позволяет пользователям управлять файлами в HDFS. Это включает в себя просмотр, создание, удаление и копирование файлов.

- **Доступ к данным**: Hue обеспечивает прямой доступ к данным в HDFS, что позволяет пользователям легко загружать и обрабатывать большие объемы данных

Добавьте настройки для подключения к HDFS: `namenode_host=your_namenode_host namenode_port=8020`

#### b. Конфигурация YARN

- **Планировщик задач Oozie**: Hue интегрируется с Oozie, что позволяет пользователям создавать и управлять рабочими процессами, включая MapReduce, Spark и другие задачи. Oozie обеспечивает планирование и запуск задач, что делает Hue более мощным инструментом для автоматизации рабочих процессов.

- **Работа с приложениями**: Hue поддерживает работу с приложениями YARN, включая запуск и мониторинг приложений. Это позволяет пользователям отслеживать статус и результаты их задач напрямую из интерфейса Hue.

- **REST API для YARN**: Hadoop предоставляет набор REST API для компонентов YARN, что позволяет Hue взаимодействовать с YARN через URI-доступные интерфейсы. Это включает в себя получение информации о кластере, нодах, приложениях и истории приложений.

Чтобы настроить Hue для работы с YARN, добавьте следующие параметры в  `hue.ini`: `resourcemanager_host=your_resourcemanager_host resourcemanager_port=8032`

Если у вас есть HA (High Availability) кластер, вы можете указать более одного ResourceManager:  `ini resourcemanager_hosts=rm1:8032,rm2:8032`

### 3.  **Настройка аутентификации**

Если вы используете Kerberos для аутентификации в YARN и HDFS, убедитесь, что Hue настроен для работы с Kerberos. В файле  `hue.ini`  добавьте: `auth_backend=desktop.auth.backend.kerberos`

Убедитесь, что также настроены  `krb5.conf`  и у вас есть необходимый ключевой табличный файл (`keytab`).

### 4.  **Проверка функциональности**

Запустите Hue с помощью команды:  `bash cd /path/to/hue build/env/bin/hue runserver`  Hue будет доступен по адресу  `http://localhost:8888`. После этого проверьте следующие возможности:

-   **Работа с HDFS**:
    
    -   Перейдите в раздел "File Browser" (Обозреватель файлов) и проверьте, можете ли вы просматривать, загружать и удалять файлы в HDFS.

-   **Запуск YARN задач**:
    
    -   Перейдите в раздел "Jobs" (Работы), где вы сможете запускать, мониторить и управлять задачами, которые работают на YARN.

### 5.  **Настройка приложений**

Если вы планируете использовать приложения, такие как Pig или Spark через Hue, убедитесь, что они правильно настроены в  `hue.ini`: `pig_server_host=your_pig_server_host pig_server_port=8998
spark_server_host=your_spark_server_host spark_server_port=4040`

### 6.  **Тестирование**

После выполнения всех шагов, выполните тест:

-   Загрузите файл в HDFS через Hue.
-   Запустите YARN задачу и проверьте её статус через интерфейс Hue.

## Настройка интеграции

- **Добавление библиотеки MapReduce в YARN**:

    -   Чтобы запускать DistCp и MapReduce приложения, необходимо добавить MapReduce библиотеку в YARN classpath. Это можно сделать на Ambari UI, где необходимо изменить конфигурацию `yarn.application.classpath` и добавить необходимые библиотеки.

- **Установка поддержки CORS**:

	-   Чтобы включить поддержку CORS только для ResourceManager, необходимо установить соответствующие параметры конфигурации в `core-site.xml` и `yarn-site.xml`. Это позволяет ResourceManagerto принимать запросы с разных источников.

## Заключение

Интеграция Apache Hue с HDFS и YARN обеспечивает мощные функции для анализа и обработки больших объемов данных. Hue предоставляет удобный веб-интерфейс для взаимодействия с различными компонентами Hadoop, что делает его незаменимым инструментом для аналитиков и разработчиков в экосистеме Hadoop. Возможно использовать Hue для управления данными и заданиями в вашем Hadoop-кластере.