# Управляемые и внешние таблицы в Hive

В Hive два типа таблиц: управляемые и внешние таблицы. Отличия между ними проявляются в плане хранения, обработки и использования данных, что будет рассмотрено ниже.

    Управляемые таблицы:

    Хранение данных: Данные управляемой таблицы хранятся в файлах, которые создаются автоматически при создании таблицы. Путь к этим файлам задается по умолчанию Hive, основываясь на настройках конфигурации и настройках таблицы.
    Удаление: При удалении таблицы все данные и метаданные удаляются.
    Изменения: Записи в управляемой таблице могут изменяться только с использованием команд INSERT или OVERWRITE.
    Выполнение запросов: Обычно используются для хранения долгосрочных данных, так как позволяют выполнять запросы к данным за счет их прямого доступа.

    Внешние таблицы:

    Хранение данных: Внешняя таблица ссылается на данные, хранящиеся в другом расположении, которое может быть локальным файлом, HDFS или другим СУБД.
    Удаление: Если удалить внешнюю таблицу, только метаданные удаляются. Данные сохраняются в исходном расположении.
    Изменения: Нельзя изменять структуру и данные в внешней таблице напрямую. Для этого необходимо обновить исходные данные и после этого выполнить обновление таблицы.
    Выполнение запросов: Используются для быстрого обращения к данным из других систем, что может быть полезно при управлении различными источниками данных или при необходимости экспорта данных из Hive.

Пример создания управляемой таблицы:


```sql
CREATE TABLE my_table (
  col1 INT,
  col2 STRING,
  col3 TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
```

Пример создания внешней таблицы:
```sql
CREATE EXTERNAL TABLE my_external_table (
  col1 INT,
  col2 STRING,
  col3 TIMESTAMP
) ROW FORMAT DELIMITED
  FIELDS TERMINATED BY ','
  LOCATION '/path/to/data/'
  TBLPROPERTIES ('skip.header.line.count'='1');
```