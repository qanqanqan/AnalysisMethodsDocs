## Типы znode и их особенности

В Apache ZooKeeper `znodes` (ZooKeeper nodes) представляют собой узлы в иерархическом дереве данных, которые используются для хранения данных и метаданных. Каждый `znode` может содержать данные и иметь дочерние узлы. Существует несколько типов `znodes`, каждый из которых имеет свои особенности и предназначение:

### Типы Znode

1. **Persistent Znode (Постоянный узел)**:
   - **Описание**: Этот тип узла сохраняется в ZooKeeper даже после завершения сессии клиента, который его создал. Он продолжает существовать до тех пор, пока не будет явно удален.
   - **Использование**: Идеально подходит для хранения конфигурационных данных и метаданных, которые должны сохраняться независимо от состояния клиента.

2. **Ephemeral Znode (Эфемерный узел)**:
   - **Описание**: Эфемерный узел автоматически удаляется, когда сессия клиента, который его создал, заканчивается или разрывается. Он не может иметь дочерних узлов.
   - **Использование**: Полезен для временных данных, таких как информация о состоянии узлов, где необходимо автоматическое удаление после завершения работы клиента.

3. **Sequential Znode (Последовательный узел)**:
   - **Описание**: Этот тип узла получает уникальный последовательный номер, добавляемый к его имени в момент создания. Последовательные узлы могут быть как постоянными, так и эфемерными.
   - **Использование**: Часто используется для реализации очередей или для создания уникальных идентификаторов, например, при выборе лидера в кластере.

### Особенности Znode

- **Данные**: Каждый `znode` может содержать небольшое количество данных (по умолчанию до 1 МБ). Данные могут быть любыми, но обычно это строки или двоичные данные.

- **Иерархия**: `Znodes` организованы в иерархическую структуру, подобную файловой системе, где каждый узел может иметь дочерние узлы.

- **Watchers**: Клиенты могут устанавливать наблюдателей (watchers) на `znodes`, чтобы получать уведомления о изменениях данных или структуры узлов. Это позволяет реализовывать реактивное поведение в приложениях.

- **Атомарные операции**: Операции с `znodes` (создание, удаление, обновление) являются атомарными, что обеспечивает согласованность данных.

Эти типы и особенности `znodes` делают ZooKeeper мощным инструментом для управления состоянием и координации в распределенных системах.