
Apache ZooKeeper использует структуру данных, называемую ZNode, для организации информации в виде иерархического пространства имен. Каждый ZNode может хранить данные и иметь дочерние узлы, что делает его похожим на файловую систему. Ниже представлены основные аспекты структуры и типов ZNode в ZooKeeper.

---
## Структура ZNode

- **Иерархия**: ZNodes организованы в древовидную структуру, где каждый узел (ZNode) идентифицируется своим путем, аналогично файлам и директориям в файловой системе. Например, путь `/zookeeper/quota` указывает на конкретный ZNode.
- **Данные**: Каждый ZNode может содержать данные (максимальный размер которых ограничен 1 MB) и метаданные, такие как версия и временные метки.
---
## Типы ZNode

ZooKeeper поддерживает несколько типов ZNode, каждый из которых имеет свои особенности:

1. **Persistent ZNodes**:
    - Это тип узлов, который сохраняется даже после отключения клиента, создавшего его. Persistent ZNodes остаются в системе до тех пор, пока их не удалят явно.
    - Применяются для хранения постоянной информации.
    
2. **Ephemeral ZNodes**:
    - Эти узлы существуют только во время активной сессии клиента. Если клиент отключается, все связанные с ним Ephemeral ZNodes автоматически удаляются.
    - Они не могут иметь дочерние узлы и часто используются для представления активных клиентов или ресурсов.
    
3. **Sequential ZNodes**:
    - При создании такого узла ZooKeeper добавляет к его имени уникальный последовательный номер. Это позволяет гарантировать уникальность каждого узла.
    - Sequential ZNodes могут быть как Persistent, так и Ephemeral.
    - Используются для создания уникальных идентификаторов или для реализации очередей.
    
4. **Container ZNodes**:
    - Этот тип создан для упрощения управления неиспользуемыми узлами. Container ZNodes ведут себя как Persistent, но могут быть помечены для удаления, когда их дочерние узлы удаляются.
    - Полезны для управления ресурсами и очистки.
---
## Применение типов ZNode

- **Синхронизация**: Ephemeral и Sequential ZNodes часто используются для реализации механизмов блокировки и синхронизации в распределенных системах.
- **Управление состоянием**: Persistent ZNodes могут хранить конфигурационные данные и метаданные о состоянии системы.
- **Обнаружение сервисов**: Использование Ephemeral ZNodes позволяет отслеживать активные клиенты или сервисы в распределенной среде.
---

