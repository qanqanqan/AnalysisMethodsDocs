# Основные компоненты высокой доступности HDFS

HDFS (Hadoop Distributed File System) поддерживает высокую доступность (High Availability) для обеспечения непрерывного доступа к данным даже при сбоях в системе. Основные компоненты высокой доступности включают:

## 1. **Active NameNode**
   Active NameNode – это основной узел, который в любой момент времени отвечает за управление метаданными файловой системы HDFS. Он обрабатывает все запросы клиентов на чтение и запись, а также поддерживает актуальное состояние файловой системы.

## 2. **Secondary NameNode**
   Secondary NameNode — это резервный узел, который синхронизируется с Active NameNode. Он готов к переключению (failover) в случае сбоя Active NameNode. Для обеспечения синхронизации Secondary узел получает журналы изменений от Active узла.

## 3. **JournalNode**
   JournalNode — это узлы, которые хранят журналы изменений (edit logs) файловой системы. Оба NameNode (и Active, и Secondary) записывают и читают изменения через JournalNodes для обеспечения согласованности данных при переключении.

## 4. **Zookeeper**
   Zookeeper — это координационный сервис, который используется для управления процессом переключения (failover) между Active и Secondary NameNode. Он следит за состоянием NameNode и автоматически инициирует процесс переключения в случае сбоя Active NameNode.

## 5. **Shared Storage**
   Общая система хранения, которая используется Active и Secondary NameNode для хранения информации об актуальном состоянии файловой системы. Это может быть NFS (Network File System) или любой другой тип совместно используемого хранилища.

## 6. **DataNodes**
   DataNodes — это узлы, которые хранят блоки данных в HDFS. Эти узлы продолжают обслуживать запросы на чтение/запись от клиентов независимо от того, какой NameNode (Active или Secondary) выполняет роль ведущего в данный момент.

## 7. **Quorum-Based Failover**
   При отказе Active NameNode, Zookeeper координирует выбор Secondary узла как нового Active NameNode. Этот процесс известен как переключение (failover), и он основан на кворуме, где большинство узлов (JournalNode и Zookeeper) принимают решение о смене Active NameNode.

# Поток работы в режиме высокой доступности
1. **Нормальная работа**: Active NameNode отвечает за все операции, а Secondary синхронизируется через JournalNodes.
2. **Сбой Active NameNode**: Zookeeper фиксирует сбой и инициирует процесс переключения.
3. **Переключение**: Secondary NameNode становится Active NameNode и продолжает обслуживание запросов клиентов.

