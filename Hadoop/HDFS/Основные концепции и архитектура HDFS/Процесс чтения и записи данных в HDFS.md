# Процесс чтения и записи данных в HDFS

**Hadoop Distributed File System (HDFS)** предоставляет надежный и масштабируемый способ хранения и обработки больших объемов данных. В этом документе описаны основные этапы процессов чтения и записи данных в HDFS.

## 1. **Процесс записи данных в HDFS**

### 1.1. **Шаги записи данных**

1. **Клиент**:
   - Клиент обращается к **NameNode** для получения информации о пространстве имен и местоположении блоков данных.

2. **Получение информации о блоках**:
   - NameNode возвращает информацию о том, на каких DataNode будут храниться блоки данных. Клиент получает список DataNode в порядке их приоритета.

3. **Запись данных на DataNode**:
   - Клиент начинает отправлять данные на первый DataNode из списка. Данные разбиваются на блоки, и каждый блок записывается на соответствующий DataNode.
   - После успешной записи блока на первый DataNode, этот DataNode отправляет подтверждение (acknowledgment) клиенту.

4. **Репликация данных**:
   - Первый DataNode отправляет данные на следующий DataNode в списке, повторяя процесс записи и отправки подтверждений.
   - Этот процесс продолжается до тех пор, пока все блоки не будут записаны на заданное количество DataNode (по умолчанию — 3).

5. **Обновление метаданных**:
   - После успешной записи всех блоков, DataNode отправляют информацию о состоянии блоков обратно на NameNode. NameNode обновляет свои метаданные, фиксируя информацию о новых блоках.

### 1.2. **Итог**
Процесс записи данных в HDFS включает взаимодействие клиента с NameNode и DataNode, а также репликацию данных для обеспечения надежности и доступности.

## 2. **Процесс чтения данных из HDFS**

### 2.1. **Шаги чтения данных**

1. **Клиент**:
   - Клиент обращается к **NameNode** для получения информации о метаданных файла, который необходимо прочитать.

2. **Получение местоположения блоков**:
   - NameNode возвращает клиенту информацию о том, на каких DataNode находятся блоки данных файла.

3. **Запрос данных у DataNode**:
   - Клиент отправляет запросы на чтение блоков данных на каждый DataNode в порядке их приоритета.
   - Клиент запрашивает данные у первого DataNode, получая блоки по мере их доступности.

4. **Чтение данных**:
   - DataNode отправляет запрашиваемые блоки обратно клиенту.
   - Если первый DataNode недоступен, клиент обращается ко второму DataNode в списке и повторяет процесс, пока не получит все необходимые данные.

5. **Сборка данных**:
   - Клиент собирает полученные блоки данных в единый файл и завершает операцию чтения.

### 2.2. **Итог**
Процесс чтения данных из HDFS включает получение информации о местоположении блоков от NameNode и запрос данных у DataNode, обеспечивая высокую производительность и отказоустойчивость.

## Заключение

Процессы чтения и записи данных в HDFS обеспечивают высокую производительность, надежность и масштабируемость. Архитектура HDFS, основанная на разделении данных на блоки и репликации, позволяет эффективно управлять большими объемами данных, обеспечивая при этом отказоустойчивость и доступность.
