## Изменение репликации и проверка состояния файлов в HDFS

В Hadoop Distributed File System (HDFS) управление репликацией файлов и проверка состояния файлов - важные аспекты для обеспечения надежности и доступности данных. Ниже приведены основные команды и методы для изменения уровня репликации и проверки состояния файлов в HDFS.

### Изменение уровня репликации

Для изменения уровня репликации файла или каталога в HDFS используйте команду `hadoop fs -setrep`. Например, чтобы установить уровень репликации для файла или каталога, выполните следующую команду:

```bash
hadoop fs -setrep <репликация> /путь/к/файлу_или_каталогу
```

#### Пример:

Если вы хотите изменить уровень репликации файла на 3, используйте команду:

```bash
hadoop fs -setrep 3 /user/hadoop/myfile.txt
```

### Изменение уровня репликации для всех файлов в каталоге

Если вы хотите установить уровень репликации для всех файлов в каталоге, вы можете комбинировать команды с использованием параметра `-R` (рекурсивно):

```bash
hadoop fs -setrep -w <репликация> -R /путь/к/каталогу
```

#### Пример:

```bash
hadoop fs -setrep -w 2 -R /user/hadoop/mydir/
```

### Проверка состояния файлов

Чтобы проверить состояние файлов в HDFS, вы можете использовать команду `hadoop fs -ls`. Эта команда отображает информацию о файлах и каталогах, включая уровень репликации.

#### Пример:

Для отображения информации о конкретном файле используйте:

```bash
hadoop fs -ls /путь/к/файлу
```

Для отображения информации о всех файлах и каталогах в определенном каталоге:

```bash
hadoop fs -ls /путь/к/каталогу
```

### Вывод

Вывод команды будет включать столбцы с правами доступа, количеством реплик, владельцем, группой, размером файла и временем модификации.

Пример вывода:

```
-rw-r--r--   3 hadoop hadoop   1048576 2023-01-01 10:00 /user/hadoop/myfile.txt
```

Здесь `3` - это уровень репликации.

### Мониторинг состояния репликации

Вы также можете использовать `hdfs dfsadmin` для получения информации о состоянии HDFS:

```bash
hdfs dfsadmin -report
```

Эта команда выведет общую информацию о файловой системе HDFS, включая количество узлов, использование дискового пространства и состояние репликации.

### Примечания

- Убедитесь, что у вас есть соответствующие права для изменения уровня репликации.
- Уровень репликации по умолчанию в HDFS обычно равен 3, но он может быть изменен в конфигурации вашего кластера.
- Изменение уровня репликации может занять некоторое время, особенно для больших файлов или каталогов.