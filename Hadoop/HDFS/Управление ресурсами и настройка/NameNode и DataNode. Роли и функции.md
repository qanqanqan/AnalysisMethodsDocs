
NameNode и DataNode — два основных компонента в архитектуре HDFS, которые играют ключевые роли в хранении и управлении данными.

# NameNode: Роль и функции

NameNode — это центральный сервер в HDFS, который управляет метаданными и координирует доступ к файлам, но не хранит сами данные. Его роль в системе является критически важной для функционирования всего HDFS.

## Основные функции NameNode:
1. Управление метаданными:

    - NameNode хранит метаданные обо всех файлах, находящихся в HDFS. Метаданные включают информацию о структуре каталогов, правах доступа, количестве блоков файла и на каких DataNode хранятся эти блоки.
    - Все операции чтения и записи файлов проходят через NameNode, который указывает клиентам, на каких DataNode находятся нужные блоки.
2. Управление доступом к файлам:

    - Когда клиент делает запрос на чтение или запись файла, NameNode предоставляет информацию о расположении блоков данных на DataNode.
    - NameNode определяет, какие блоки отправить клиенту для чтения, и координирует процесс записи новых блоков на DataNode.
3. Репликация данных:

    - NameNode управляет процессом репликации данных, определяя, сколько копий каждого блока должно храниться на разных DataNode (по умолчанию 3 реплики).
    - При отказе одного из DataNode, NameNode автоматически пересчитывает и создает дополнительные реплики, если это необходимо.
4. Журналирование операций (Edit Log):

    - Все изменения файловой системы (создание, удаление файлов, перемещение блоков и т.д.) записываются в журнал NameNode, называемый Edit Log.
    - Этот журнал помогает восстановить файловую систему в случае сбоя NameNode.
5. Хранение снимков состояния (FsImage):

    - NameNode периодически сохраняет полное состояние файловой системы в виде снимка (FsImage). Это помогает быстро восстанавливать систему при необходимости.
## Ключевые особенности:
- Критическая роль: NameNode — это "мозг" системы, и без его работы невозможно взаимодействовать с данными. Это делает его единой точкой отказа (Single Point of Failure, SPOF), если не настроено отказоустойчивое резервирование.
- Резервное копирование: Обычно используется Secondary NameNode для периодической синхронизации данных и поддержания метаданных в актуальном состоянии.

# DataNode: Роль и функции
DataNode — это узлы в HDFS, которые непосредственно хранят данные. В отличие от NameNode, DataNode не управляет метаданными и не знает о структуре файловой системы — его задача состоит в хранении и обслуживании блоков данных.

## Основные функции DataNode:
1. Хранение блоков данных:

    - Каждый файл в HDFS делится на блоки, и эти блоки распределяются по различным DataNode. DataNode хранят физические блоки данных и предоставляют их для чтения или записи.
    - Блоки одного и того же файла могут быть распределены по разным DataNode для параллельного доступа и отказоустойчивости.
2. Обмен данными с клиентами:

    - Когда клиент запрашивает данные, NameNode указывает, на каких DataNode находятся нужные блоки, и затем клиент напрямую обращается к DataNode для чтения или записи данных.
    - DataNode отвечают за передачу данных клиентам и другим узлам.
3. Отправка отчетов (Block Report):

    - DataNode регулярно отправляют отчеты NameNode о состоянии своих блоков данных. Это помогает NameNode отслеживать, какие блоки и в каком состоянии находятся на каждом DataNode.
    - Если блок поврежден или узел выходит из строя, NameNode инициирует процесс репликации, чтобы восстановить данные.
4. Репликация данных:

    - DataNode участвуют в процессе репликации. Когда NameNode решает создать новую копию блока данных, он инструктирует соответствующие DataNode передать копии данных на другие узлы.
5. Обработка операций чтения и записи:

    - При записи файла в HDFS, данные сначала разбиваются на блоки, которые распределяются по различным DataNode. Эти узлы непосредственно записывают и хранят блоки.
    - Для чтения файла клиент взаимодействует с DataNode напрямую, чтобы получить запрашиваемые блоки.
## Ключевые особенности:
- Отказоустойчивость: DataNode могут выходить из строя, и это не нарушает работу всей системы, поскольку HDFS автоматически восстанавливает данные с помощью копий на других узлах.
- Масштабируемость: Легко добавлять новые DataNode для увеличения хранилища и производительности кластера.
# Взаимодействие NameNode и DataNode:
1. NameNode хранит метаданные о файлах и блоках данных, но не сами данные.
2. DataNode фактически хранят блоки данных и обмениваются информацией с NameNode для координации работы.
3. Клиенты взаимодействуют с обоими: запрашивают метаданные у NameNode и фактические данные у DataNode.

Таким образом, NameNode управляет всей системой, а DataNode выполняют физическое хранение данных и обработку запросов.