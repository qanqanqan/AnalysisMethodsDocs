# Таблицы, транзакции и индексы в базах данных

## Таблицы

**Таблица** — это основная структура в реляционных базах данных, которая используется для хранения данных. Таблица состоит из строк (записей) и столбцов (полей), где каждая строка представляет собой отдельную запись, а столбцы содержат данные определённого типа.

### Основные элементы таблицы:

1. **Столбцы (Columns)**:
   - Каждая таблица состоит из столбцов, которые определяют типы данных, хранящихся в таблице (например, `INTEGER`, `VARCHAR`, `DATE` и т.д.).
   - Столбцы также могут иметь ограничения (constraints), такие как уникальность (`UNIQUE`), первичный ключ (`PRIMARY KEY`), и не допускающие пустых значений (`NOT NULL`).

2. **Строки (Rows)**:
   - Каждая строка в таблице представляет собой отдельную запись данных. Строка содержит значения для каждого столбца.

3. **Первичный ключ (Primary Key)**:
   - Это столбец (или набор столбцов), который однозначно идентифицирует каждую строку в таблице. Первичный ключ не может содержать пустых значений и должен быть уникальным для каждой записи.

4. **Внешний ключ (Foreign Key)**:
   - Это столбец, который ссылается на первичный ключ другой таблицы, обеспечивая связь между данными в различных таблицах.

### Пример таблицы:

```sql
CREATE TABLE Customers (
    CustomerID INT PRIMARY KEY,
    FirstName  VARCHAR(50),
    LastName   VARCHAR(50),
    Email      VARCHAR(100) UNIQUE,
    CreatedAt  DATE
);
```
## Транзакции
#### Транзакция — это набор операций с базой данных, которые должны выполняться как единое целое. Транзакция либо выполняется полностью, либо не выполняется вовсе (атомарность). Транзакции используются для обеспечения целостности данных и управления параллельным доступом.

### Основные свойства транзакции (ACID):
1. Атомарность (Atomicity):

- Все операции в транзакции выполняются либо полностью, либо не выполняются вообще. Если в процессе выполнения транзакции происходит ошибка, все изменения отменяются.

2. Согласованность (Consistency):

- Транзакция переводит базу данных из одного согласованного состояния в другое. После выполнения транзакции все ограничения целостности базы данных должны соблюдаться.

3. Изолированность (Isolation):

- Параллельно выполняемые транзакции не должны влиять друг на друга. Изолированность предотвращает конфликты при одновременной работе нескольких транзакций.

4. Долговечность (Durability):

- После завершения транзакции её изменения должны сохраняться, даже если система сбоила (например, после отключения питания).

### Пример транзакции:
```sql

BEGIN;
   UPDATE Accounts SET Balance = Balance - 100 WHERE AccountID = 1;
   UPDATE Accounts SET Balance = Balance + 100 WHERE AccountID = 2;
COMMIT;
```
В данном примере транзакция переводит 100 единиц с одного счёта на другой. Либо обе операции выполнены, либо ни одна.

### Команды для управления транзакциями:
- BEGIN — начало транзакции.
- COMMIT — завершение транзакции, фиксирует изменения в базе данных.
- ROLLBACK — отмена транзакции, возвращает базу данных в состояние до начала транзакции.
## Индексы
### Индекс — это структура данных, которая используется для ускорения операций поиска и доступа к данным в таблице. Индексы могут существенно улучшить производительность запросов, особенно на больших таблицах.

### Основные типы индексов:
1. B-дерево (B-tree):

- Стандартный тип индекса, который используется в большинстве реляционных баз данных. Индексы на основе B-деревьев обеспечивают эффективный доступ к данным по значениям столбцов, упорядочивая их.
Индексы B-деревьев эффективны для точного поиска и диапазонных запросов.

2. Хэш-индекс (Hash Index):

- Использует хэш-функции для быстрого поиска по точным значениям. Этот тип индекса подходит для запросов на точное соответствие (например, WHERE id = 123), но не поддерживает диапазонные запросы.

3. Полнотекстовый индекс (Full-text Index):

- Используется для быстрого поиска текста по большим текстовым полям. Подходит для поиска по текстовым данным, таким как статьи или документы.
