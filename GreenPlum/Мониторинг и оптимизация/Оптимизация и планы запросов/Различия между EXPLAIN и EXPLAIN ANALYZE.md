### Различия между EXPLAIN и EXPLAIN ANALYZE

Команды `EXPLAIN` и `EXPLAIN ANALYZE` в Greenplum (и PostgreSQL) служат для анализа выполнения SQL-запросов, но они имеют разные функции и выходные данные.

#### 1. EXPLAIN

- **Описание**: Команда `EXPLAIN` предоставляет план выполнения запроса, который генерируется оптимизатором. Она показывает, как будут обрабатываться таблицы, какие методы соединения будут использоваться и какие операции будут выполнены.
- **Выходные данные**: Вывод включает оценочную стоимость выполнения запроса, а также предполагаемое количество строк, которые будут обработаны на каждом этапе.
- **Время выполнения**: Не выполняет сам запрос, поэтому время его выполнения минимально.
- **Использование**: Подходит для предварительного анализа запросов, чтобы понять, как оптимизатор планирует их выполнять.

Пример использования:

```sql
EXPLAIN SELECT * FROM employees WHERE employee_id = 198;
```

#### 2. EXPLAIN ANALYZE

- **Описание**: Команда `EXPLAIN ANALYZE` не только показывает план выполнения, но и фактически выполняет запрос. Это позволяет получить реальные данные о времени выполнения каждой операции.
- **Выходные данные**: Вывод включает фактическое время выполнения каждого узла плана, общее время выполнения запроса и количество обработанных строк. Это помогает сравнить оценочные данные с реальными результатами.
- **Время выполнения**: Поскольку запрос выполняется, это может занять больше времени и ресурсов по сравнению с `EXPLAIN`.
- **Использование**: Рекомендуется использовать для более глубокого анализа производительности запросов, особенно если результаты `EXPLAIN` не совпадают с ожиданиями.

Пример использования:

```sql
EXPLAIN ANALYZE SELECT * FROM employees WHERE employee_id = 198;
```

### Основные различия

| Характеристика       | EXPLAIN                        | EXPLAIN ANALYZE                 |
|----------------------|--------------------------------|----------------------------------|
| Выполнение запроса   | Не выполняет                   | Выполняет запрос                 |
| Выходные данные      | Оценочная стоимость            | Фактическое время и строки       |
| Время выполнения      | Быстрое                        | Может занять больше времени      |
| Использование        | Предварительный анализ         | Глубокий анализ производительности|

### Заключение

Использование `EXPLAIN` полезно для первоначального анализа запросов, в то время как `EXPLAIN ANALYZE` предоставляет более точную информацию о фактическом выполнении запросов. Оба инструмента важны для оптимизации производительности SQL-запросов в Greenplum.

Citations:
[1] https://easyoffer.ru/question/257
[2] https://sql-ex.ru/blogs/
[3] https://bigdataschool.ru/blog/explain-sql-queries-in-greenplum.html
[4] https://stackoverflow.com/questions/59720605/explain-vs-explain-analyze-in-postgresql
[5] https://infostart.ru/1c/articles/1117331/
[6] https://www.greenplumdba.com/greenplum-database-performance-tuning/reading-explain-analyze-output-in-greenplum
[7] https://docs.vmware.com/en/VMware-Greenplum/7/greenplum-database/admin_guide-query-topics-query-profiling.html
[8] https://docs.vmware.com/en/VMware-Greenplum/7/greenplum-database/ref_guide-sql_commands-EXPLAIN.html