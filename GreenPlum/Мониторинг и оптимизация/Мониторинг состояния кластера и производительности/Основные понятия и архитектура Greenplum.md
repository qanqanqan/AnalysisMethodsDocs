Greenplum — это реляционная система управления базами данных (СУБД), основанная на архитектуре массивно-параллельной обработки (MPP) и предназначенная для хранения и анализа больших объемов данных. Она разработана на основе PostgreSQL и оптимизирована для выполнения аналитических запросов.

## Основные понятия

1. **Архитектура MPP**:
   - Greenplum использует архитектуру без разделения ресурсов (Shared Nothing), что означает, что каждый узел (сегмент) имеет свою собственную память, процессор и дисковое пространство. Это позволяет эффективно распределять нагрузку и обрабатывать запросы параллельно.

2. **Кластер**:
   - Кластер Greenplum состоит из нескольких компонентов:
     - **Мастер-сервер**: Координирует выполнение запросов и распределяет их между сегментами. Он не хранит пользовательские данные.
     - **Сегменты**: Отдельные экземпляры PostgreSQL, которые хранят данные и выполняют обработку запросов. Каждый сегмент отвечает за определенную часть данных.
     - **Резервный мастер**: Обеспечивает отказоустойчивость, автоматически активируется при сбое основного мастера.

3. **Дистрибуция данных**:
   - Данные в Greenplum распределяются по сегментам с помощью ключа дистрибуции, который определяет, как строки таблицы будут распределены между сегментами. Это критически важно для производительности, так как неравномерное распределение может привести к узким местам.

4. **Шардирование**:
   - Каждая таблица в Greenplum фактически представляет собой несколько таблиц, распределенных по сегментам. Это позволяет эффективно обрабатывать большие объемы данных, так как каждый сегмент работает с частью данных.

5. **Интерконнект**:
   - Быстрая сеть (обычно 10 Гбит/с или выше), обеспечивающая связь между мастером и сегментами. Высокая пропускная способность сети критична для производительности системы.

## Архитектура Greenplum

- **Мастер-сервер**: Принимает SQL-запросы от клиентов, парсит их и создает планы выполнения, которые затем отправляются на соответствующие сегменты для обработки.
  
- **Сегменты**: Каждый сегмент обрабатывает свою часть данных параллельно с другими сегментами. Результаты обработки собираются и возвращаются на мастер-сервер для финальной агрегации.

- **Зеркальные сегменты**: Для повышения надежности каждому первичному сегменту соответствует зеркальный сегмент, который может быть активирован в случае сбоя основного.

## Заключение

Greenplum — это мощная платформа для аналитики больших данных, которая использует архитектуру MPP для обеспечения высокой производительности и масштабируемости. Правильное понимание основных понятий и архитектуры системы позволяет эффективно использовать ее возможности для решения сложных аналитических задач.

Citations:
[1] https://habr.com/ru/companies/tbank/articles/267733/
[2] https://bigdataschool.ru/wiki/greenplum
[3] https://habr.com/ru/companies/axenix/articles/811977/
[4] https://datafinder.ru/products/greenplum-obzornaya-informaciya
[5] https://www.qlever.ru/press/dwh-greenplum
[6] https://cloud.vk.com/blog/kak-rabotaet-greenplum-baza-dannykh-dlya-big-data
[7] https://pgday.ru/presentation/225/596db8533c881.pdf
[8] https://habr.com/ru/companies/neoflex/articles/780486/