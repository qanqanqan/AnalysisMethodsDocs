## Роли мастер-узла и сегментов в Greenplum

В архитектуре Greenplum, которая основана на принципах массивно-параллельной обработки (MPP), мастер-узел и сегменты выполняют ключевые роли в управлении данными и выполнении запросов.

**Роль мастер-узла**

- **Точка входа**: Мастер-узел (Master host) является основным интерфейсом для пользователей, которые подключаются к базе данных и отправляют SQL-запросы.

- **Координация запросов**: Он принимает запросы от клиентов, выполняет их компиляцию и оптимизацию, а затем распределяет их между сегментами для параллельной обработки.

- **Управление данными**: Мастер-узел не хранит пользовательские данные; вся информация хранится на сегментах. Однако он управляет глобальным системным каталогом, который содержит метаданные о базе данных.

- **Сбор результатов**: После выполнения запросов на сегментах, мастер-узел собирает результаты и возвращает их клиенту.

- **Обеспечение доступности**: В случае сбоя основного мастера активируется резервный мастер (Standby master), который поддерживает высокую доступность системы.

**Роль сегментов**

- **Хранение данных**: Сегменты (Segment hosts) представляют собой независимые экземпляры PostgreSQL, которые хранят часть данных и обрабатывают запросы. Каждый сегмент отвечает за свою долю информации.

- **Обработка запросов**: Сегменты выполняют большую часть вычислений. После получения задания от мастера они создают процессы для обработки данных и выполнения подзадач запроса.

- **Зеркалирование**: Для повышения надежности каждый основной сегмент (Primary segment) имеет зеркальный сегмент (Mirror segment), который автоматически активируется при сбое основного.

- **Параллельная обработка**: Сегменты работают независимо друг от друга, что позволяет системе эффективно распределять нагрузку и обрабатывать большие объемы данных одновременно.

Эта архитектура обеспечивает высокую производительность и масштабируемость Greenplum, что делает его подходящим для работы с большими данными в различных аналитических задачах.
